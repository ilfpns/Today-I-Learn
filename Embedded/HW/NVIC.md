> **Nested Vectored Interrupt Controller**
> 

---

⇒ 중첩 벡터형 인터럽트 제어기, 특수 PIC이다

⇒ STM32 F4시리즈의 모든 시스템 예외와 외부 인터럽트는 NVIC에서 처리한다

⇒ 프로세서와 밀접하게 상호 연결되어 있으므로, 빠르고 효율적인 인터럽트 처리가 가능하다

**ㅤ**

### 특징

- 82개 마스크 가능한 인터럽트 채널
- Cortex M4 프로세서로부터 입력되는 16개의 인터럽트 채널
- 16단계의 우선순위 설정 가능
- 인터럽트 우선순위 설정에는 4비트를 이용함
- 빠른 인터럽트 처리 시간

**ㅤ**

> **NVIC 인터럽트 처리**
> 

---

<img width="924" height="389" alt="image" src="https://github.com/user-attachments/assets/1dbfc5ad-dd9a-4abb-9469-4cf8ee0fcd02" />

⇒ 모든 인터럽트 예외에 대한 우선순위를 결정하고 처리한다

**ㅤ**

1. 스택킹 (Stacking)
    
    → 인터럽트 처리에 사용될 레지스터의 현재 값 등을 스택에 저장한다
    
2. 벡터 인출 (Vector Fetch)
    
    → 벡터 테이블에서 인터럽트 핸들러의 시작 주소를 Ferch
    
3. 레지스터 업데이트
    
    → 인터럽트 핸들러로 진입할 때 관련된 레지스터가 업데이트한다
    
4. 인터럽트 서비스 루틴 실행
    
    → 발생된 인터럽트에 해당되는 인터럽트 서비스 루틴을 실행한다
    
5. 인터럽트 종료 빠져나오기
    
    → 인터럽트 서비스 루틴의 실행이 완료되면 인터럽트를 종효하기 위해 1단계 스택에 넣었던 내용을 다시 읽어와 레지스터 원래 값으로 복구한다
    

**ㅤ**

**중첩 인터럽트**

⇒ NVIC는 중첩 벡터형 인터럽트이다

⇒ 현재 실행중인 인터럽트보다 우선 순위가 높은 인터럽트가 발생할 경우, 현재 동작을 멈추고 높은 순위 먼저 처리한다

⇒ 인터럽트 속의 인터럽트라 중첩 인터럽트라고 한다

**ㅤ**

**벡터형 인터럽트** 

⇒ 벡터는 위치와 방향을 의미한다

⇒ 데이터를 읽는 과정은 시작 주소부터 순서대로 비교하면서 일치하는 값이 있을 경우 읽어들이는 방식이다

**ㅤ**

- 벡터 테이블은 데이터가 있는 위치와 방향을 저장한 표이다
    
    → 순서를 신경쓰지 않고  저장된 위치로 가서 해당 데이터 값을 읽어들린다
    
    → Data Adress 같은 방식으로, Program Counter가 주소를 기억하고 찾아다니는 것처럼 작동한다
